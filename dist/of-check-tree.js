"use strict";(self.webpackChunkopenfrontend_framework=self.webpackChunkopenfrontend_framework||[]).push([[681],{3163:function(e,t,n){n.r(t),n.d(t,{initMultiple:function(){return o}});var i=n(3066);const l="changed.of.check_tree",r='input[type="checkbox"]',c={},s={};class a extends i.Z{constructor(e,t){super(e,t),this._fields=[...this._element.querySelectorAll(r)],this._togglers=[...this._element.querySelectorAll('button[type="button"]')],this._initFields(),this._initTogglers(),this._element.dispatchEvent(new CustomEvent("initialized.of.check_tree"))}static get Default(){return s}static get DefaultType(){return c}static get NAME(){return"check_tree"}getValue(){return this._collectValuesFromElement(this._element)}setValue(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this._fields.filter((e=>{e.checked=!1,e.indeterminate=!1})),this._fields.filter((t=>e.includes(t.value))).forEach((e=>{e.checked=!0,this._updateField(e)})),t&&this._element.dispatchEvent(new CustomEvent(l))}_initFields(){this._fields.forEach((e=>{this._updateField(e),e.addEventListener("change",(()=>{this._updateField(e),this._element.dispatchEvent(new CustomEvent(l))}))}))}_initTogglers(){this._togglers.forEach((e=>e.addEventListener("click",(()=>{"true"===e.ariaExpanded?this._collapseToggler(e):this._expandToggler(e)}))))}_collectValuesFromElement(e){const t=[],n=e.querySelectorAll(":scope > li > * > ".concat(r));for(const e of n)if(e.checked)t.push(e.value);else if((e.checked||e.indeterminate)&&!e.checked&&e.indeterminate){const n=this._getFieldSubtree(e);if(!n)continue;t.push(...this._collectValuesFromElement(n))}return t}_updateField(e){const t=this._getFieldSubtree(e);t&&t.querySelectorAll(r).forEach((t=>t.checked=e.checked)),this._getParentFields(e).forEach((e=>{const t=[...this._getFieldSubtree(e).querySelectorAll(r)],n=t.filter((e=>e.checked)).length;switch(!0){case n===t.length:e.checked=!0,e.indeterminate=!1;break;case n>0:e.checked=!1,e.indeterminate=!0;break;case 0===n:e.checked=!1,e.indeterminate=!1}}))}_getFieldSubtree(e){return e.closest("li").querySelector(":scope > ul")}_getParentFields(e){const t=[];let n=e.closest("li").parentElement;for(;n&&n!==this._element;)"LI"===n.tagName&&t.push(n.querySelector(":scope > * > ".concat(r))),n=n.parentElement;return t}_collapseToggler(e){e.ariaExpanded="false",e.parentElement.ariaExpanded="false"}_expandToggler(e){e.ariaExpanded="true",e.parentElement.ariaExpanded="true"}}function o(e){for(const t of e)a.getOrCreateInstance(t,t.dataset.ofCheckTree?JSON.parse(t.dataset.ofCheckTree):{})}t.default=a}}]);