"use strict";(self.webpackChunkopenfrontend_framework=self.webpackChunkopenfrontend_framework||[]).push([[864],{4555:function(t,e,i){i.r(e),i.d(e,{default:function(){return w},initMultiple:function(){return I}});var s=i(4811),n=i(3541),a=i(7652),r=i(3549);a.Z.use([r.W_,r.pt,r.bi]);const o="lightbox-thumbnails",l="lightbox-",h={autoplayVideos:!0,closeEffect:"fade",closeOnOutsideClick:!1,openEffect:"fade",touchNavigation:!0},c='<div id="glightbox-body" class="glightbox-container" tabindex="-1" role="dialog" aria-hidden="false">\n  <div class="gloader visible"></div>\n  <div class="goverlay"></div>\n  <div class="gcontainer">\n    <div class="'.concat("lightbox-wrapper",'">\n      {beforeContent}\n      <div id="glightbox-slider" class="gslider"></div>\n      {afterContent}\n    </div>\n    <button class="gclose gbtn" aria-label="Close" data-taborder="3">{closeSVG}</button>\n    <button class="gprev gbtn" aria-label="Previous" data-taborder="2">{prevSVG}</button>\n    <button class="gnext gbtn" aria-label="Next" data-taborder="1">{nextSVG}</button>\n  </div>\n</div>'),b={slidesPerView:"auto",spaceBetween:10,navigation:{nextEl:".carousel-button-next",prevEl:".carousel-button-prev"},slideToClickedSlide:!0,watchOverflow:!0,centeredSlides:!0},d={items:"array",tabs:"array",thumbnails:"boolean",urlHashTracking:"boolean"},u={items:[],tabs:[],thumbnails:!1,urlHashTracking:!0};class g extends s.Z{constructor(t,e){super(),this._config=this._getConfig(e),this._identifier=t,this._lightbox=new n.Z(this._getLightboxOptions()),this._lightbox.on("close",this._onClose.bind(this)),this._lightbox.on("open",this._onOpen.bind(this)),this._lightbox.on("slide_before_change",this._onSlideBeforeChange.bind(this)),this._lightbox.on("slide_changed",this._onSlideChanged.bind(this)),this._init()}static get Default(){return u}static get DefaultType(){return d}static get NAME(){return"lightbox"}open(t){if(null===t)return;let e;"string"==typeof t&&null===/^\d+$/.exec(t)?(e=this._config.items.findIndex((e=>e.identifier===t)),e=-1===e?0:e):e=t||0,this._lightbox.openAt(e),this._config.thumbnails&&this._setThumbnailsActiveSlide(e,0)}getUrlHashPrefix(){return l}_getLightboxOptions(){let t=c;return t=t.replace(/{beforeContent}/,this._getBeforeContentHtml()),t=t.replace(/{afterContent}/,this._getAfterContentHtml()),{...h,elements:this._config.items.map((t=>({...t,zoomable:!1}))),lightboxHTML:t}}_init(){this._config.urlHashTracking&&(this.open(this._getItemFromUrlHash()),window.addEventListener("hashchange",(()=>this.open(this._getItemFromUrlHash()))))}_getBeforeContentHtml(){return""}_getAfterContentHtml(){return this._config.thumbnails?'<div class="'.concat(o,'"></div>'):""}_getLightboxElement(t){return this._lightbox.modal.querySelector(t)}_onClose(){this._config.thumbnails&&(this._thumbnailsElement.remove(),this._thumbnailsElement=null,this._thumbnailsCarousel=null),this._config.urlHashTracking&&window.history.pushState({},null,this._generateUrlForItem())}_onOpen(){this._config.thumbnails&&(this._thumbnailsElement=this._getLightboxElement(".".concat(o)),this._createResizeObserver(this._thumbnailsElement,"thumbnails-wrapper-height"),this._generateThumbnails(),this._updateThumbnails()),this._config.urlHashTracking&&this._updateUrlHashOnOpen()}_onSlideBeforeChange(t){let{current:e}=t;this._config.thumbnails&&this._setThumbnailsActiveSlide(e.index),this._config.urlHashTracking&&this._updateUrlHashOnSlideChange(e.index)}_onSlideChanged(t){var e;let{current:i}=t;this._descriptionObserver&&this._currentDescription&&this._descriptionObserver.unobserve(this._currentDescription),this._currentDescription=null==i||null===(e=i.slideNode)||void 0===e?void 0:e.querySelector(".gslide-description"),this._currentDescription&&this._currentDescription.textContent&&"absolute"!==window.getComputedStyle(this._currentDescription).position?this._descriptionObserver=this._createResizeObserver(this._currentDescription,"description-height"):document.documentElement.style.setProperty("--lightbox-description-height","0px")}_updateUrlHashOnOpen(){window.history.pushState({},null,this._generateUrlForItem(this._lightbox.index))}_updateUrlHashOnSlideChange(t){window.history.replaceState({},null,this._generateUrlForItem(t))}_generateUrlHash(t){return"number"==typeof t&&(t=this._config.items[t].identifier||t),"".concat(l).concat(this._identifier,":").concat(t)}_generateUrlForItem(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=window.location.pathname;return(t||0===t)&&(e="".concat(e,"#").concat(this._generateUrlHash(t))),e}_getItemFromUrlHash(){if(!window.location.hash.startsWith("#".concat(l)))return null;let[t,e]=window.location.hash.substring(l.length+1).split(":");return t!==this._identifier?null:e}_generateThumbnails(){const t=document.createElement("div");t.innerHTML='<div class="gallery-thumbnails carousel carousel-navigation-center">\n  <div class="swiper">\n    <div class="swiper-wrapper"></div>\n  </div>\n  <div class="carousel-navigation">\n    <button type="button" class="carousel-button-prev btn btn-square btn-primary">\n      <i class="ofi-caret-left-fill"></i>\n    </button>\n    <button type="button" class="carousel-button-next btn btn-square btn-primary">\n      <i class="ofi-caret-right-fill"></i>\n    </button>\n  </div>\n</div>',this._thumbnailsElement.append(t.firstElementChild),this._thumbnailsCarousel=new a.Z(this._thumbnailsElement.querySelector(".swiper"),b),this._thumbnailsCarousel.on("slideChange",(()=>{this._thumbnailsCarouselLocked||this._setThumbnailsActiveSlide(this._thumbnailsCarousel.realIndex)}))}_updateThumbnails(){if(!this._thumbnailsCarousel)return;const t=/\.(gif|jpg|jpeg|png|svg|webp)$/;this._thumbnailsCarouselLocked=!0,this._thumbnailsCarousel.disable(),this._thumbnailsCarousel.removeAllSlides(),this._thumbnailsCarousel.appendSlide(this._generateThumbnailsCarouselSlides((e=>{const i=document.createElement("div");i.className="swiper-slide";let{thumbnail:s}=e;if(!s&&!e.type&&e.href&&t.test(e.href)&&(e.type="image"),s||"image"!==e.type||(s=e.href),s){const t=document.createElement("img");t.src=s,t.alt=e.alt||"",e.thumbnailSrcset&&(t.srcset=e.thumbnailSrcset,e.thumbnailSizes&&(t.sizes=e.thumbnailSizes)),i.append(t)}return i}))),this._thumbnailsCarousel.enable(),this._thumbnailsCarouselLocked=!1}_generateThumbnailsCarouselSlides(t){return this._config.items.map(t)}_setThumbnailsActiveSlide(t,e){this._thumbnailsCarousel&&this._thumbnailsCarousel.slides.length>=t&&this._thumbnailsCarousel.slideTo(t,e),this._lightbox.index!==t&&this._lightbox.goToSlide(t)}_createResizeObserver(t,e){const i=new ResizeObserver((i=>i.forEach((()=>this._updateCssVariable(t,e)))));return i.observe(t),this._updateCssVariable(t,e),i}_updateCssVariable(t,e){document.documentElement.style.setProperty("--lightbox-".concat(e),"".concat(t.getBoundingClientRect().height,"px"))}}var m=g;const _="active",p="lightbox-tabs";var f=class extends m{open(t){if(null===t)return;const{tabIndex:e,itemIndex:i}=this._getTabAndItemIndexes(t);this._setActiveTab(e,i),this._lightbox.openAt(i),this._config.thumbnails&&this._setThumbnailsActiveSlide(i,0)}_getBeforeContentHtml(){return'<div class="'.concat(p,'"></div>')}_init(){if(0===this._config.tabs.length)throw new Error("There are no tabs defined");this._tabsActiveTabIndex=0,this._tabsLinks=[],this._tabsItemsMapper=this._config.tabs.flatMap(((t,e)=>t.items.map(((t,i)=>({...t,tabIndex:e,itemIndex:i}))))),super._init()}_onOpen(){super._onOpen(),this._tabsElement=this._getLightboxElement(".".concat(p)),this._createResizeObserver(this._tabsElement,"tabs-wrapper-height"),this._generateTabs(),this._bindTabEvents()}_onClose(){super._onClose(),this._tabsElement.remove(),this._tabsElement=null,this._tabsLinks=[]}_generateThumbnailsCarouselSlides(t){return this._config.tabs[this._tabsActiveTabIndex].items.map(t)}_updateUrlHashOnOpen(){window.history.pushState({},null,this._generateUrlForItem(this._getTabItemIndex(this._lightbox.index)))}_updateUrlHashOnSlideChange(t){window.history.replaceState({},null,this._generateUrlForItem(this._getTabItemIndex(t)))}_generateUrlHash(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return"number"==typeof t&&(t=this._tabsItemsMapper[t].identifier||t),"".concat(this.getUrlHashPrefix()).concat(this._identifier,":").concat(t)}_getTabItemIndex(t){const e=this._tabsItemsMapper.findIndex((e=>e.itemIndex===t&&e.tabIndex===this._tabsActiveTabIndex));return-1!==e?e:0}_generateTabs(){const t=document.createElement("ul");t.className="nav nav-underline";for(const[e,i]of this._config.tabs.entries()){const s=document.createElement("li");s.className="nav-item";const n=document.createElement("a");n.className="nav-link",n.textContent=i.name||e,n.href=this._config.urlHashTracking?"#".concat(this._generateUrlHash(this._tabsItemsMapper.findIndex((t=>t.tabIndex===e)))):"#",n.dataset.tab=e,this._tabsLinks.push(n),e===this._tabsActiveTabIndex&&n.classList.add(_),s.append(n),t.append(s)}this._tabsElement.append(t)}_setActiveTab(t){this._tabsActiveTabIndex=Number.parseInt(t,10);for(const[t,e]of this._tabsLinks.entries())t===this._tabsActiveTabIndex?e.classList.add(_):e.classList.contains(_)&&e.classList.remove(_);this._lightbox.prevActiveSlideIndex=null,this._lightbox.prevActiveSlide=null,this._lightbox.setElements(this._config.tabs[this._tabsActiveTabIndex].items)}_bindTabEvents(){for(const t of this._tabsLinks)t.addEventListener("click",(e=>{e.preventDefault(),t.classList.contains(_)||(this._setActiveTab(t.dataset.tab),this._config.thumbnails&&(this._updateThumbnails(),this._setThumbnailsActiveSlide(0,0)),this._config.urlHashTracking&&window.history.replaceState({},null,this._generateUrlForItem(this._tabsItemsMapper.findIndex((t=>t.tabIndex===this._tabsActiveTabIndex)))))}))}_getTabAndItemIndexes(t){let e;return"string"==typeof t&&null===/^\d+$/.exec(t)?(e=this._tabsItemsMapper.findIndex((e=>e.identifier===t)),e=-1===e?0:e):e=t||0,this._tabsItemsMapper[e]?{tabIndex:this._tabsItemsMapper[e].tabIndex,itemIndex:this._tabsItemsMapper[e].itemIndex}:{tabIndex:0,itemIndex:0}}};class x{constructor(){this.configs=new Map,this.instances=new Map}initializeLightboxes(){for(const[t,e]of this.configs.entries()){const i=[];if(Object.prototype.hasOwnProperty.call(e,"elements"))for(const[s,{element:n,options:a}]of e.elements.entries()){const e={...a};n.hasAttribute("href")&&(e.href=n.href),i.push(e),n.addEventListener("click",(e=>{e.preventDefault(),this.instances.get(t).open(s)}))}e.items=e.items?[...i,...e.items]:i,Object.prototype.hasOwnProperty.call(e,"tabs")&&e.tabs.length>0?this.instances.set(t,new f(t,e)):this.instances.set(t,new m(t,e))}}registerFromConfigElement(t){const e=t.dataset.ofLightboxConfig;if(this.configs.has(e))throw new Error("You cannot have more than one lightbox config with the same identifier: ".concat(e));const i=JSON.parse(t.textContent.trim());i.elements=i.elements||[],this.configs.set(e,i)}registerFromRegularElement(t){const e=""===t.dataset.ofLightbox?{}:JSON.parse(t.dataset.ofLightbox),i=Object.prototype.hasOwnProperty.call(e,"group")?e.group:"all";this.configs.has(i)||this.configs.set(i,{elements:[]}),this.configs.get(i).elements.push({element:t,options:e})}registerTriggerElement(t){t.addEventListener("click",(e=>{e.preventDefault();const[i,s]=t.dataset.ofLightboxOpen.split(":");if(!this.instances.has(i))throw new Error('The lightbox with identifier "'.concat(i,'" does not exist'));this.instances.get(i).open(s)}))}}const v=new x;function I(t){for(const e of[...t].filter((t=>t.hasAttribute("data-of-lightbox-config"))))v.registerFromConfigElement(e);for(const e of[...t].filter((t=>t.hasAttribute("data-of-lightbox"))))v.registerFromRegularElement(e);for(const e of[...t].filter((t=>t.hasAttribute("data-of-lightbox-open"))))v.registerTriggerElement(e);v.initializeLightboxes()}var w=x}}]);